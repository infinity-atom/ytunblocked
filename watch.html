<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playing Video - YTUnblocked</title>
    <link rel="stylesheet" href="./styles/omain.css">
    <link rel="stylesheet" href="./styles/watch.css">
    <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
    <script src="./scripts/omain.js"></script>
</head>
<body>
    <div id="dba" class="dialog-background dbahidden"></div>
    <div id="db" class="dialog-body dbhidden">
        <h2>UnblockedAUTH</h2>
        <span>Please type the password to enter the site.</span>
        <input autocomplete="off" readonly 
        onfocus="this.removeAttribute('readonly');" type="password" id="authpassword"><br>
        <input type="button" onclick="submitPassword();" id="authbutton" value="Submit">
    </div>
    <div class="header">
        <div class="header-infobutton" onclick="showMenu();">
            <img class="icon" src="assets/icons/menu.png" alt="menu" draggable="false">
        </div>
        <div style="padding-left: 32px;"></div>
        <a id="linkI" href="index.html">
            <img style="height: 46px; margin-top: 3px;" src="assets/ytimg.png" alt="menu" draggable="false">
        </a>
        <div style="padding-left: 42px;"></div>
    </div>
    <div class="menu" id="menuObj" style="display: none;">
        <h2>YoutubeUNBLOCKED</h2>
        By InfinityAtom
        <hr>
        <h3>Video Credits</h3>
        <hr>
        <ul>
            <li>Mumbo Jumbo</li>
            <li>Lynix</li>
            <li>Mrwhosetheboss</li>
            <li>Tom Scott</li>
            <li>Leviathan</li>
        </ul>
    </div>
    <div class="bodyArea">
      <video controls controlsList="nodownload" oncontextmenu="return false;">
        <source id="videoE" src="">
      </video><br>
      <h2 id="videoTitle">This is a video title</h2>
      <hr>
      <img width="46" id="channelLogo" src=""><span id="channel">Person</span>
      <hr>
      <div id="description">
          <pre id="descriptionText">
            Description
          </pre>
      </div>
    </div>
    <script src="./scripts/watch.js"></script>
    <div class="footer">
        <img id="videoData" src="https://img.shields.io/badge/Videos-0-informational" draggable="false">
    </div>
</body>

<script>
    var outp = "n";
    function readTextFile(file)
    {
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function ()
        {
            if(rawFile.readyState === 4)
            {
                if(rawFile.status === 200 || rawFile.status == 0)
                {
                    outp = rawFile.responseText;
                    
                }
            }
        }
        rawFile.send(null);
    }
    readTextFile("videos.txt");
    document.getElementById("videoData").src = "https://img.shields.io/badge/Videos-" + outp + "-informational";

    const k = "Vm0wd2QyVkhVWGhVYmxKV1YwZDRXRmxVU205V2JGbDNXa1pPVlUxV2NIcFhhMk0xVmpGYWRHVkliRmhoTWsweFZtcEtTMUl5VGtsaVJtUlhUVEZLVFZac1ZtRldNVnBXVFZWV2FHVnFRVGs9";
    const u = "VIxRjNWakJhUzJOdFFFZhMDVhVmWnRkSGRXYkZsNFdrUlNhVTFyYkRSWmExcHJXVlpLYzFkc1RscGlSbHBvV1dwR1UxZEhVa2xhUmxKWFlrWlpNVmRyVm1wT1ZsbDVVMnhhYWxJtUlhUVEZLVFZac1ZtRldNVnBXVFZWV2FHVnFR";

    function getParam(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    if(getParam("key") != u) {
        document.getElementById("dba").classList.remove("dbahidden");
        document.getElementById("db").classList.remove("dbhidden");
        
        document.getElementById("dba").classList.add("dbashown")
        document.getElementById("db").classList.add("dbshown");
    }

    function submitPassword() {
        if(document.getElementById("authpassword").value == atob(atob(atob(atob(atob(atob(atob(atob(atob(atob(k))))))))))) {
            document.getElementById("dba").classList.add("dbahidden");
            document.getElementById("db").classList.add("dbhidden");
            
            document.getElementById("dba").classList.remove("dbashown")
            document.getElementById("db").classList.remove("dbshown");
            window.location.href = window.location.href + "&key=" + u;
            document.getElementById("linkI").href = "index.html?key=" + u;
        } else {
            document.getElementById("authbutton").value = "Wrong!";
            setTimeout(function() { document.getElementById("authbutton").value = "Submit"; }, 1000);
        }
    }

    document.addEventListener("mousemove", (e) => {
        console.log("e");
        try {
            document.getElementById("dba").name = "working";
            document.getElementById("db").name = "working";
        }
        catch(err) {
            location.reload();
        }
    });
</script>
</html>